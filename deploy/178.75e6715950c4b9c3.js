"use strict";(self.webpackChunktp05_bertuol_yoann=self.webpackChunktp05_bertuol_yoann||[]).push([[178],{5178:(U,v,n)=>{n.r(v),n.d(v,{CatalogModule:()=>f});var c=n(6895),a=n(4006),u=n(3074),y=n(4205),t=n(8274),T=n(4302),x=n(529);class i extends T.n{http;constructor(o){super(),this.http=o}getCatalogue(){return this.http.get(this.apiUrl+"/product")}static \u0275fac=function(e){return new(e||i)(t.LFG(x.eN))};static \u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}var Z=n(4318);class d{property="";list=[];filter=new t.vpe;resetList=new t.vpe;searchControl=new a.NI;constructor(){}ngOnInit(){this.searchControl.valueChanges.subscribe(o=>{o?this.filter.emit(this.list.filter(e=>e[this.property].toLowerCase().includes(o.toLowerCase()))):this.resetList.emit()})}static \u0275fac=function(e){return new(e||d)};static \u0275cmp=t.Xpm({type:d,selectors:[["app-search-bar"]],inputs:{property:"property",list:"list"},outputs:{filter:"filter",resetList:"resetList"},decls:1,vars:1,consts:[["type","text","placeholder","Search",3,"formControl"]],template:function(e,s){1&e&&t._UZ(0,"input",0),2&e&&t.Q6J("formControl",s.searchControl)},dependencies:[a.Fj,a.JJ,a.oH]})}function A(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"li"),t._uU(1),t.TgZ(2,"button",2),t._uU(3,"I"),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){const l=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.onClickAdd(l))}),t._uU(5,"Add to cart"),t.qZA()()}if(2&r){const e=o.$implicit;t.xp6(1),t.hij(" ",e.name," "),t.xp6(1),t.s9C("routerLink",e.id)}}class g{catalogService;store;filterer="";catalog=[];subscription;constructor(o,e){this.catalogService=o,this.store=e,this.subscription=this.getCatalog()}ngOnInit(){}getCatalog(){return this.catalogService.getCatalogue().subscribe(o=>{this.catalog=o})}updateProducts(o){this.catalog=o}onClickAdd(o){this.store.dispatch(new y.R(o))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(e){return new(e||g)(t.Y36(i),t.Y36(Z.yh))};static \u0275cmp=t.Xpm({type:g,selectors:[["app-catalog"]],decls:5,vars:2,consts:[["property","name",3,"list","filter","resetList"],[4,"ngFor","ngForOf"],[3,"routerLink"],[3,"click"]],template:function(e,s){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Catalog"),t.qZA(),t.TgZ(2,"app-search-bar",0),t.NdJ("filter",function(l){return s.updateProducts(l)})("resetList",function(){return s.getCatalog()}),t.qZA(),t.TgZ(3,"ul"),t.YNc(4,A,6,2,"li",1),t.qZA()),2&e&&(t.xp6(2),t.Q6J("list",s.catalog),t.xp6(2),t.Q6J("ngForOf",s.catalog))},dependencies:[c.sg,u.rH,d]})}function F(r,o){if(1&r&&(t.TgZ(0,"div")(1,"div")(2,"p"),t._uU(3),t.qZA()(),t.TgZ(4,"div")(5,"p"),t._uU(6),t.qZA()(),t.TgZ(7,"div")(8,"p"),t._uU(9),t.qZA()()()),2&r){const e=t.oxw();t.xp6(3),t.hij("Name: ",e.product.name,""),t.xp6(3),t.hij("Price: ",e.product.price,""),t.xp6(3),t.hij("Description: ",e.product.description,"")}}class m{catalogService;route;product;constructor(o,e){this.catalogService=o,this.route=e,o.getCatalogue().subscribe(s=>{this.product=s.find(p=>p.id.toString()===this.route.snapshot.paramMap.get("id"))})}ngOnInit(){}static \u0275fac=function(e){return new(e||m)(t.Y36(i),t.Y36(u.gz))};static \u0275cmp=t.Xpm({type:m,selectors:[["app-product-details"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,s){1&e&&t.YNc(0,F,10,3,"div",0),2&e&&t.Q6J("ngIf",s.product)},dependencies:[c.O5]})}var b=n(8675);function L(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"li"),t._uU(1),t.ALo(2,"currency"),t.TgZ(3,"button",1),t.NdJ("click",function(){const l=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.onClickRemove(l))}),t._uU(4,"Remove from cart"),t.qZA()()}if(2&r){const e=o.$implicit;t.xp6(1),t.AsE(" ",e.name," : ",t.lcZ(2,2,e.price)," ")}}class h{store;products$;constructor(o){this.store=o,this.products$=this.store.select(b.k.getItems)}onClickRemove(o){this.store.dispatch(new y.m(o))}ngOnInit(){}static \u0275fac=function(e){return new(e||h)(t.Y36(Z.yh))};static \u0275cmp=t.Xpm({type:h,selectors:[["app-shopping-cart"]],decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"click"]],template:function(e,s){1&e&&(t.TgZ(0,"ul"),t.YNc(1,L,5,4,"li",0),t.ALo(2,"async"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,s.products$)))},dependencies:[c.sg,c.Ov,c.H9]})}const _=[{path:"cart",component:h},{path:":id",component:m},{path:"",component:g}];class f{static \u0275fac=function(e){return new(e||f)};static \u0275mod=t.oAB({type:f});static \u0275inj=t.cJS({providers:[i],imports:[c.ez,u.Bz.forChild(_),a.UX,u.Bz]})}}}]);